"use strict";(()=>{var e={};e.id=3705,e.ids=[3705],e.modules={3452:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>u,getStaticProps:()=>x,reportWebVitals:()=>p,routeModule:()=>N,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>f});var r=s(7093),n=s(5244),l=s(1323),i=s(7645),c=s(6814),d=s(8796),o=e([c,d]);[c,d]=o.then?(await o)():o;let m=(0,l.l)(d,"default"),x=(0,l.l)(d,"getStaticProps"),u=(0,l.l)(d,"getStaticPaths"),h=(0,l.l)(d,"getServerSideProps"),g=(0,l.l)(d,"config"),p=(0,l.l)(d,"reportWebVitals"),f=(0,l.l)(d,"unstable_getStaticProps"),v=(0,l.l)(d,"unstable_getStaticPaths"),b=(0,l.l)(d,"unstable_getStaticParams"),j=(0,l.l)(d,"unstable_getServerProps"),y=(0,l.l)(d,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/admin/cloud-config",pathname:"/admin/cloud-config",bundlePath:"",filename:""},components:{App:c.default,Document:i.default},userland:d});a()}catch(e){a(e)}})},9553:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(997);s(6689);var r=s(9832);let n=({children:e,className:t,variant:s="default",padding:n="md",hover:l=!1,animate:i=!1})=>a.jsx("div",{className:(0,r.cn)("transition-all duration-300",(()=>{switch(s){case"glass":return"glass rounded-2xl shadow-xl";case"elevated":return"card-modern";case"outlined":return"bg-white/95 dark:bg-slate-800/95 border border-violet-200/50 dark:border-violet-700/50 hover:border-violet-300 dark:hover:border-violet-600 transition-all duration-300 backdrop-blur-md";default:return"card"}})(),(()=>{switch(n){case"none":return"";case"sm":return"p-4";case"md":default:return"p-6";case"lg":return"p-8"}})(),l&&"hover-lift cursor-pointer group",i&&"animate-fade-in",t),children:e});n.Header=({children:e,className:t})=>a.jsx("div",{className:(0,r.cn)("card-header",t),children:e}),n.Body=({children:e,className:t})=>a.jsx("div",{className:(0,r.cn)("card-body",t),children:e}),n.Footer=({children:e,className:t})=>a.jsx("div",{className:(0,r.cn)("card-footer",t),children:e});let l=n},3546:(e,t,s)=>{s.d(t,{I:()=>l});var a=s(997),r=s(6689),n=s(9832);let l=(0,r.forwardRef)(({className:e,type:t,label:s,error:r,helperText:l,leftIcon:i,rightIcon:c,id:d,...o},m)=>{let x=d||`input-${Math.random().toString(36).substr(2,9)}`;return(0,a.jsxs)("div",{className:"w-full",children:[s&&a.jsx("label",{htmlFor:x,className:"form-label",children:s}),(0,a.jsxs)("div",{className:"relative",children:[i&&a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-400 text-sm",children:i})}),a.jsx("input",{type:t,id:x,className:(0,n.cn)("form-input-modern",i&&"pl-12",c&&"pr-12",r&&"border-red-400 focus:border-red-500 focus:ring-red-500 shadow-glow-rose","focus:shadow-glow transition-all duration-300",e),ref:m,...o}),c&&a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-400 text-sm",children:c})})]}),r&&a.jsx("p",{className:"form-error",children:r}),l&&!r&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:l})]})});l.displayName="Input"},8796:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>N});var r=s(997),n=s(6689),l=s(9314),i=s(1163),c=s(968),d=s.n(c),o=s(6250),m=s(9767),x=s(3546),u=s(9553),h=s(9948),g=s(4671),p=s(2280),f=s(3749),v=s(986),b=s(406),j=s(4535),y=e([o,m]);[o,m]=y.then?(await y)():y;let N=()=>{let{user:e,isLoading:t}=(0,l.a)(),s=(0,i.useRouter)(),{showToast:a}=(0,h.p)(),[c,y]=(0,n.useState)(!0),[N,w]=(0,n.useState)(!1),[_,S]=(0,n.useState)(!1),[k,C]=(0,n.useState)({server_url:"",api_key:"",sync_interval:300,retry_attempts:3,timeout:3e4,enable_auto_sync:!0,enable_offline_mode:!0,max_offline_records:1e3});(0,n.useEffect)(()=>{if(!t&&(!e||"admin"!==e.role)){s.push("/login");return}e&&P()},[e,t]);let P=async()=>{try{y(!0);let e=await fetch("/api/devices/cloud-config"),t=await e.json();t.success?C(t.data):a("Failed to load configuration","error")}catch(e){a("Error loading configuration","error")}finally{y(!1)}},Z=async()=>{try{w(!0);let e=k.id?"PUT":"POST",t=k.id?`/api/devices/cloud-config?id=${k.id}`:"/api/devices/cloud-config",s=await fetch(t,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),r=await s.json();r.success?(C(r.data),a("Configuration saved successfully","success")):a(r.message||"Failed to save configuration","error")}catch(e){a("Error saving configuration","error")}finally{w(!1)}},E=async()=>{try{S(!0),await new Promise(e=>setTimeout(e,2e3)),k.server_url.startsWith("http")&&k.api_key.length>0?a("Connection test successful","success"):a("Connection test failed","error")}catch(e){a("Connection test failed","error")}finally{S(!1)}},I=(e,t)=>{C(s=>({...s,[e]:t}))};return t||c?r.jsx(o.Z,{children:r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d(),{children:[r.jsx("title",{children:"Cloud Server Configuration - AFMS"}),r.jsx("meta",{name:"description",content:"Configure cloud server settings for fingerprint devices"})]}),r.jsx(o.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(g.Z,{className:"h-8 w-8 text-blue-600"}),"Cloud Server Configuration"]}),r.jsx("p",{className:"text-gray-600",children:"Configure cloud server settings for fingerprint device synchronization"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(m.z,{onClick:E,disabled:_||!k.server_url||!k.api_key,variant:"outline",leftIcon:r.jsx(p.Z,{className:`h-4 w-4 ${_?"animate-spin":""}`}),children:_?"Testing...":"Test Connection"}),r.jsx(m.z,{onClick:Z,disabled:N,leftIcon:r.jsx(f.Z,{className:"h-4 w-4"}),children:N?"Saving...":"Save Configuration"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(u.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(v.Z,{className:"h-5 w-5 text-blue-600"}),"Server Settings"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Server URL *"}),r.jsx(x.I,{type:"url",value:k.server_url,onChange:e=>I("server_url",e.target.value),placeholder:"https://your-cloud-server.com/api",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Key *"}),r.jsx(x.I,{type:"password",value:k.api_key,onChange:e=>I("api_key",e.target.value),placeholder:"Enter your API key",required:!0})]})]})]})}),r.jsx(u.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(p.Z,{className:"h-5 w-5 text-green-600"}),"Synchronization Settings"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sync Interval (seconds)"}),r.jsx(x.I,{type:"number",value:k.sync_interval,onChange:e=>I("sync_interval",parseInt(e.target.value)),min:"60",max:"3600"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 60-3600 seconds"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retry Attempts"}),r.jsx(x.I,{type:"number",value:k.retry_attempts,onChange:e=>I("retry_attempts",parseInt(e.target.value)),min:"1",max:"10"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 1-10 attempts"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timeout (milliseconds)"}),r.jsx(x.I,{type:"number",value:k.timeout,onChange:e=>I("timeout",parseInt(e.target.value)),min:"5000",max:"120000"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 5000-120000 ms"})]})]})]})}),r.jsx(u.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(b.Z,{className:"h-5 w-5 text-purple-600"}),"Advanced Settings"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Auto Sync"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Automatically sync data at specified intervals"})]}),r.jsx("input",{type:"checkbox",checked:k.enable_auto_sync,onChange:e=>I("enable_auto_sync",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Offline Mode"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Store data locally when server is unavailable"})]}),r.jsx("input",{type:"checkbox",checked:k.enable_offline_mode,onChange:e=>I("enable_offline_mode",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Offline Records"}),r.jsx(x.I,{type:"number",value:k.max_offline_records,onChange:e=>I("max_offline_records",parseInt(e.target.value)),min:"100",max:"10000",disabled:!k.enable_offline_mode}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Range: 100-10000 records"})]})]})]})}),r.jsx(u.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(j.Z,{className:"h-5 w-5 text-yellow-600"}),"Configuration Status"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"Server URL"}),r.jsx("span",{className:`text-sm font-medium ${k.server_url?"text-green-600":"text-red-600"}`,children:k.server_url?"Configured":"Not Set"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"API Key"}),r.jsx("span",{className:`text-sm font-medium ${k.api_key?"text-green-600":"text-red-600"}`,children:k.api_key?"Configured":"Not Set"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"Auto Sync"}),r.jsx("span",{className:`text-sm font-medium ${k.enable_auto_sync?"text-green-600":"text-gray-600"}`,children:k.enable_auto_sync?"Enabled":"Disabled"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"Offline Mode"}),r.jsx("span",{className:`text-sm font-medium ${k.enable_offline_mode?"text-green-600":"text-gray-600"}`,children:k.enable_offline_mode?"Enabled":"Disabled"})]}),k.updated_at&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700",children:"Last Updated"}),r.jsx("span",{className:"text-sm text-gray-600",children:new Date(k.updated_at).toLocaleString()})]})]})]})})]})]})})]})};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9752:e=>{e.exports=import("@tanstack/react-query")},6926:e=>{e.exports=import("class-variance-authority")},2280:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(6689);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})},3749:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(6689);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},4535:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(6689);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},406:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(6689);let r=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))})}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[6859,8342,7890,1557],()=>s(3452));module.exports=a})();