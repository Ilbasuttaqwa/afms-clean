"use strict";(()=>{var e={};e.id=577,e.ids=[577],e.modules={1215:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>x,default:()=>o,getServerSideProps:()=>h,getStaticPaths:()=>g,getStaticProps:()=>u,reportWebVitals:()=>p,routeModule:()=>N,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>b});var s=t(7093),i=t(5244),n=t(1323),l=t(7645),d=t(6814),c=t(6829),m=e([d,c]);[d,c]=m.then?(await m)():m;let o=(0,n.l)(c,"default"),u=(0,n.l)(c,"getStaticProps"),g=(0,n.l)(c,"getStaticPaths"),h=(0,n.l)(c,"getServerSideProps"),x=(0,n.l)(c,"config"),p=(0,n.l)(c,"reportWebVitals"),b=(0,n.l)(c,"unstable_getStaticProps"),v=(0,n.l)(c,"unstable_getStaticPaths"),j=(0,n.l)(c,"unstable_getStaticParams"),f=(0,n.l)(c,"unstable_getServerProps"),y=(0,n.l)(c,"unstable_getServerSideProps"),N=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/admin/settings",pathname:"/admin/settings",bundlePath:"",filename:""},components:{App:d.default,Document:l.default},userland:c});r()}catch(e){r(e)}})},1504:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{z:()=>m});var s=t(997),i=t(6689),n=t(6926),l=t(9832),d=e([n]);n=(d.then?(await d)():d)[0];let c=(0,n.cva)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary-600 text-white hover:bg-primary-700",destructive:"bg-danger-600 text-white hover:bg-danger-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700",secondary:"bg-secondary-600 text-white hover:bg-secondary-700",ghost:"hover:bg-gray-100 text-gray-700",link:"underline-offset-4 hover:underline text-primary-600",success:"bg-success-600 text-white hover:bg-success-700",warning:"bg-warning-600 text-white hover:bg-warning-700"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=(0,i.forwardRef)(({className:e,variant:a,size:t,loading:r,leftIcon:i,rightIcon:n,children:d,disabled:m,...o},u)=>(0,s.jsxs)("button",{className:(0,l.cn)(c({variant:a,size:t,className:e})),ref:u,disabled:m||r,...o,children:[r&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!r&&i&&s.jsx("span",{className:"mr-2",children:i}),d,!r&&n&&s.jsx("span",{className:"ml-2",children:n})]}));m.displayName="Button",r()}catch(e){r(e)}})},3582:(e,a,t)=>{t.d(a,{I:()=>n});var r=t(997),s=t(6689),i=t(9832);let n=(0,s.forwardRef)(({className:e,type:a,label:t,error:s,helperText:n,leftIcon:l,rightIcon:d,id:c,...m},o)=>{let u=c||`input-${Math.random().toString(36).substr(2,9)}`;return(0,r.jsxs)("div",{className:"w-full",children:[t&&r.jsx("label",{htmlFor:u,className:"form-label",children:t}),(0,r.jsxs)("div",{className:"relative",children:[l&&r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-gray-400 text-sm",children:l})}),r.jsx("input",{type:a,id:u,className:(0,i.cn)("form-input-modern",l&&"pl-12",d&&"pr-12",s&&"border-red-400 focus:border-red-500 focus:ring-red-500 shadow-glow-rose","focus:shadow-glow transition-all duration-300",e),ref:o,...m}),d&&r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-gray-400 text-sm",children:d})})]}),s&&r.jsx("p",{className:"form-error",children:s}),n&&!s&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n})]})});n.displayName="Input"},6829:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>f});var s=t(997),i=t(6689),n=t(968),l=t.n(n),d=t(9314),c=t(1163),m=t(9948),o=t(6250),u=t(1504),g=t(3582),h=t(8617),x=t(4449),p=t(9232),b=t(1925),v=t(4934),j=e([o,u]);[o,u]=j.then?(await j)():j;let f=()=>{let{user:e,isAuthenticated:a,isLoading:t}=(0,d.a)(),r=(0,c.useRouter)(),{addToast:n}=(0,m.p)(),[j,f]=(0,i.useState)(!0),[y,N]=(0,i.useState)(!1),[w,k]=(0,i.useState)({jam_masuk:"08:00",jam_pulang:"17:00",toleransi_keterlambatan:15,potongan_per_menit:5e3,hari_kerja:["senin","selasa","rabu","kamis","jumat"],fingerprint_device_ip:"192.168.1.100",fingerprint_device_port:4370});(0,i.useEffect)(()=>{if(!t&&!a){r.push("/login");return}if(e&&"admin"!==e.role){r.push("/dasbor");return}a&&_()},[a,t,e,r]);let _=async()=>{try{f(!0),f(!1)}catch(e){n({type:"error",title:"Gagal memuat pengaturan"}),f(!1)}},S=async e=>{e.preventDefault();try{N(!0),n({type:"success",title:"Pengaturan berhasil disimpan"})}catch(e){n({type:"error",title:"Gagal menyimpan pengaturan"})}finally{N(!1)}},P=(e,a)=>{a?k({...w,hari_kerja:[...w.hari_kerja,e]}):k({...w,hari_kerja:w.hari_kerja.filter(a=>a!==e)})},q=async()=>{try{n({type:"info",title:"Menguji koneksi fingerprint..."}),n({type:"success",title:"Koneksi fingerprint berhasil!"})}catch(e){n({type:"error",title:"Gagal terhubung ke perangkat fingerprint"})}};return t?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a&&e?.role==="admin"?(0,s.jsxs)(o.Z,{children:[s.jsx(l(),{children:s.jsx("title",{children:"Pengaturan Sistem - AFMS"})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pengaturan Sistem"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Konfigurasi sistem absensi dan fingerprint"})]}),j?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,s.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[s.jsx(h.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Jam Kerja"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jam Masuk"}),s.jsx(g.I,{type:"time",value:w.jam_masuk,onChange:e=>k({...w,jam_masuk:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jam Pulang"}),s.jsx(g.I,{type:"time",value:w.jam_pulang,onChange:e=>k({...w,jam_pulang:e.target.value}),required:!0})]})]})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[s.jsx(x.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Aturan Absensi"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Toleransi Keterlambatan (menit)"}),s.jsx(g.I,{type:"number",value:w.toleransi_keterlambatan,onChange:e=>k({...w,toleransi_keterlambatan:Number(e.target.value)}),min:"0",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Potongan per Menit (Rp)"}),s.jsx(g.I,{type:"number",value:w.potongan_per_menit,onChange:e=>k({...w,potongan_per_menit:Number(e.target.value)}),min:"0",required:!0})]})]})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[s.jsx(p.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Hari Kerja"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"senin",label:"Senin"},{value:"selasa",label:"Selasa"},{value:"rabu",label:"Rabu"},{value:"kamis",label:"Kamis"},{value:"jumat",label:"Jumat"},{value:"sabtu",label:"Sabtu"},{value:"minggu",label:"Minggu"}].map(e=>(0,s.jsxs)("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:w.hari_kerja.includes(e.value),onChange:a=>P(e.value,a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[s.jsx(b.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Perangkat Fingerprint"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address Perangkat"}),s.jsx(g.I,{type:"text",value:w.fingerprint_device_ip,onChange:e=>k({...w,fingerprint_device_ip:e.target.value}),placeholder:"192.168.1.100",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),s.jsx(g.I,{type:"number",value:w.fingerprint_device_port,onChange:e=>k({...w,fingerprint_device_port:Number(e.target.value)}),placeholder:"4370",min:"1",max:"65535",required:!0})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx(u.z,{type:"button",variant:"outline",onClick:q,children:"Test Koneksi"})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(u.z,{type:"submit",disabled:y,className:"inline-flex items-center",children:y?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menyimpan..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(v.Z,{className:"h-4 w-4 mr-2"}),"Simpan Pengaturan"]})})})]})]})]}):null};r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9752:e=>{e.exports=import("@tanstack/react-query")},6926:e=>{e.exports=import("class-variance-authority")},9232:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))})},1925:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))})}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[6859,8342,7890,1557],()=>t(1215));module.exports=r})();