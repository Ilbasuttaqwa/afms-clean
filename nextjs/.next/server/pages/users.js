"use strict";(()=>{var e={};e.id=2892,e.ids=[2892],e.modules={6832:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>x,default:()=>g,getServerSideProps:()=>h,getStaticPaths:()=>m,getStaticProps:()=>u,reportWebVitals:()=>p,routeModule:()=>w,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>f});var s=t(7093),n=t(5244),i=t(1323),l=t(7645),o=t(6814),d=t(7877),c=e([o,d]);[o,d]=c.then?(await c)():c;let g=(0,i.l)(d,"default"),u=(0,i.l)(d,"getStaticProps"),m=(0,i.l)(d,"getStaticPaths"),h=(0,i.l)(d,"getServerSideProps"),x=(0,i.l)(d,"config"),p=(0,i.l)(d,"reportWebVitals"),f=(0,i.l)(d,"unstable_getStaticProps"),v=(0,i.l)(d,"unstable_getStaticPaths"),b=(0,i.l)(d,"unstable_getStaticParams"),j=(0,i.l)(d,"unstable_getServerProps"),y=(0,i.l)(d,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/users",pathname:"/users",bundlePath:"",filename:""},components:{App:o.default,Document:l.default},userland:d});r()}catch(e){r(e)}})},1504:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{z:()=>c});var s=t(997),n=t(6689),i=t(6926),l=t(9832),o=e([i]);i=(o.then?(await o)():o)[0];let d=(0,i.cva)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary-600 text-white hover:bg-primary-700",destructive:"bg-danger-600 text-white hover:bg-danger-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700",secondary:"bg-secondary-600 text-white hover:bg-secondary-700",ghost:"hover:bg-gray-100 text-gray-700",link:"underline-offset-4 hover:underline text-primary-600",success:"bg-success-600 text-white hover:bg-success-700",warning:"bg-warning-600 text-white hover:bg-warning-700"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,n.forwardRef)(({className:e,variant:a,size:t,loading:r,leftIcon:n,rightIcon:i,children:o,disabled:c,...g},u)=>(0,s.jsxs)("button",{className:(0,l.cn)(d({variant:a,size:t,className:e})),ref:u,disabled:c||r,...g,children:[r&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!r&&n&&s.jsx("span",{className:"mr-2",children:n}),o,!r&&i&&s.jsx("span",{className:"ml-2",children:i})]}));c.displayName="Button",r()}catch(e){r(e)}})},4230:(e,a,t)=>{t.d(a,{Z:()=>i,u:()=>n});var r=t(997);t(6689);var s=t(9832);let n=({isOpen:e,onClose:a,title:t,children:n,className:i})=>e?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:a}),(0,r.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl sm:max-w-lg",children:[t&&(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:t}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:(0,s.cn)("",i),children:n})]})]})}):null,i=n},7877:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>j});var s=t(997),n=t(6689),i=t(968),l=t.n(i),o=t(1163),d=t(379),c=t(8438),g=t(5836),u=t(8105),m=t(6250),h=t(2843);!function(){var e=Error("Cannot find module '../hooks/useDataTable'");throw e.code="MODULE_NOT_FOUND",e}();var x=t(1504),p=t(4230),f=t(9832),v=t(9948),b=e([m,x]);[m,x]=b.then?(await b)():b;let j=()=>{let e=(0,o.useRouter)(),{addToast:a}=(0,v.p)(),{state:t,actions:r}=Object(function(){var e=Error("Cannot find module '../hooks/useDataTable'");throw e.code="MODULE_NOT_FOUND",e}())({initialPageSize:10,searchDebounceMs:500}),[i,b]=(0,n.useState)([]),[j,y]=(0,n.useState)(!1),[w,k]=(0,n.useState)(null),N=async()=>{r.setLoading(!0),r.setError(null);try{let e=new URLSearchParams({page:t.pagination.current.toString(),pageSize:t.pagination.pageSize.toString(),search:t.search,...t.sort&&{sortField:t.sort.field,sortOrder:t.sort.order}}),s=await fetch(`/api/users?${e}`),n=await s.json();n.success?(r.setData(n.data),r.setPagination(n.pagination),(1===t.pagination.current||t.search)&&a({type:"success",title:"Data Berhasil Dimuat",message:`Ditemukan ${n.data.length} pengguna`})):(r.setError(n.message||"Gagal memuat pengguna"),a({type:"error",title:"Kesalahan",message:n.message||"Gagal memuat pengguna"}))}catch(e){r.setError("Gagal memuat pengguna"),a({type:"error",title:"Kesalahan",message:"Gagal terhubung ke server"})}finally{r.setLoading(!1)}};(0,n.useEffect)(()=>{N()},[t.pagination.current,t.pagination.pageSize,t.search,t.sort]);let S=async e=>{k(e),y(!0)},C=async()=>{if(w)try{(await fetch(`/api/users/${w.id}`,{method:"DELETE"})).ok?(N(),y(!1),k(null)):(r.setError("Gagal menghapus pengguna"),a({type:"error",title:"Kesalahan",message:"Gagal menghapus pengguna"}))}catch(e){r.setError("Gagal menghapus pengguna"),a({type:"error",title:"Kesalahan",message:"Gagal menghapus pengguna"})}},P=e=>s.jsx("span",{className:(0,f.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800"),children:e}),E=e=>s.jsx("span",{className:(0,f.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{admin:"bg-purple-100 text-purple-800",moderator:"bg-blue-100 text-blue-800",user:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800"),children:e}),L=[{key:"name",title:"Nama",dataIndex:"name",sortable:!0,render:(e,a)=>(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-500 flex items-center justify-center text-white font-medium",children:e.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e}),s.jsx("div",{className:"text-sm text-gray-500",children:a.email})]})]})},{key:"username",title:"Nama Pengguna",dataIndex:"username",sortable:!0},{key:"role",title:"Peran",dataIndex:"role",sortable:!0,render:e=>E(e)},{key:"status",title:"Status",dataIndex:"status",sortable:!0,render:e=>P(e)},{key:"created_at",title:"Dibuat Pada",dataIndex:"created_at",sortable:!0,render:e=>new Date(e).toLocaleDateString()},{key:"actions",title:"Aksi",align:"center",render:(a,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(x.z,{variant:"ghost",size:"sm",onClick:()=>e.push(`/users/${t.id}`),className:"text-blue-600 hover:text-blue-800",children:s.jsx(d.Z,{className:"w-4 h-4"})}),s.jsx(x.z,{variant:"ghost",size:"sm",onClick:()=>e.push(`/users/${t.id}/edit`),className:"text-green-600 hover:text-green-800",children:s.jsx(c.Z,{className:"w-4 h-4"})}),s.jsx(x.z,{variant:"ghost",size:"sm",onClick:()=>S(t),className:"text-red-600 hover:text-red-800",children:s.jsx(g.Z,{className:"w-4 h-4"})})]})}];return(0,s.jsxs)(m.Z,{children:[s.jsx(l(),{children:s.jsx("title",{children:"Manajemen Pengguna - AFMS"})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Pengguna"}),t.data.length>0&&(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.pagination.total," pengguna dimuat"]})]}),s.jsx("p",{className:"text-gray-600",children:"Kelola pengguna sistem dan izin mereka"})]}),(0,s.jsxs)(x.z,{onClick:()=>e.push("/users/create"),className:"flex items-center space-x-2",children:[s.jsx(u.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Tambah Pengguna"})]})]}),t.error&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsx("div",{className:"text-red-800",children:t.error})}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(h.Z,{columns:L,data:t.data,loading:t.loading,pagination:t.pagination,onPaginationChange:r.handlePaginationChange,onSortChange:r.handleSortChange,onSearch:r.handleSearchChange,searchable:!0,searchPlaceholder:"Cari pengguna berdasarkan nama, email, atau username...",rowSelection:{selectedRowKeys:i,onChange:e=>b(e)},emptyText:"Tidak ada pengguna ditemukan"}),!t.loading&&t.data.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 bg-gray-50 px-4 py-2 rounded-md",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Data berhasil dimuat"]}),(0,s.jsxs)("span",{children:["Menampilkan ",t.data.length," dari ",t.pagination.total," pengguna"]})]}),(0,s.jsxs)("span",{children:["Terakhir diperbarui: ",new Date().toLocaleTimeString()]})]})]}),i.length>0&&(0,s.jsxs)("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white shadow-lg rounded-lg border p-4 flex items-center space-x-4 z-50",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[i.length," pengguna dipilih"]}),(0,s.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>{},className:"text-red-600 border-red-300 hover:bg-red-50",children:[s.jsx(g.Z,{className:"w-4 h-4 mr-1"}),"Hapus Terpilih"]}),s.jsx(x.z,{variant:"ghost",size:"sm",onClick:()=>b([]),children:"Batal"})]})]}),s.jsx(p.Z,{isOpen:j,onClose:()=>y(!1),title:"Hapus Pengguna",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("p",{className:"text-gray-600",children:["Apakah Anda yakin ingin menghapus pengguna"," ",s.jsx("span",{className:"font-medium",children:w?.name}),"? Tindakan ini tidak dapat dibatalkan."]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[s.jsx(x.z,{variant:"outline",onClick:()=>y(!1),children:"Batal"}),s.jsx(x.z,{variant:"destructive",onClick:C,children:"Hapus"})]})]})})]})};r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9752:e=>{e.exports=import("@tanstack/react-query")},6926:e=>{e.exports=import("class-variance-authority")},379:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},8438:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},8105:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},5836:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})}};var a=require("../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[6859,8342,7890,1557,2843],()=>t(6832));module.exports=r})();