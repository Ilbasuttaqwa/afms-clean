"use strict";(()=>{var e={};e.id=8026,e.ids=[8026],e.modules={3393:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>u,getStaticProps:()=>x,reportWebVitals:()=>p,routeModule:()=>v,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var r=t(7093),i=t(5244),l=t(1323),n=t(7645),c=t(6814),o=t(2674),d=e([c,o]);[c,o]=d.then?(await d)():d;let m=(0,l.l)(o,"default"),x=(0,l.l)(o,"getStaticProps"),u=(0,l.l)(o,"getStaticPaths"),h=(0,l.l)(o,"getServerSideProps"),g=(0,l.l)(o,"config"),p=(0,l.l)(o,"reportWebVitals"),j=(0,l.l)(o,"unstable_getStaticProps"),y=(0,l.l)(o,"unstable_getStaticPaths"),b=(0,l.l)(o,"unstable_getStaticParams"),w=(0,l.l)(o,"unstable_getServerProps"),f=(0,l.l)(o,"unstable_getServerSideProps"),v=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/dashboard",pathname:"/dashboard",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:o});s()}catch(e){s(e)}})},1595:(e,a,t)=>{t.d(a,{Z:()=>c});var s=t(997),r=t(6689),i=t(1163),l=t(9314),n=t(2433);let c=({children:e,requiredRole:a})=>{let t=(0,l.a)(),c=t.user,o=t.isLoading,d=t.isAuthenticated,m=(0,i.useRouter)();return((0,r.useEffect)(()=>{if(!o){if(!d){m.replace("/login");return}if(a&&c&&!a.includes(c.role)){"admin"===c.role||"manager"===c.role?m.replace("/admin/dashboard"):m.replace("/dasbor");return}}},[c,o,d,m,a]),o||!d||a&&c&&!a.includes(c.role))?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(n.Z,{})}):s.jsx(s.Fragment,{children:e})}},2433:(e,a,t)=>{t.d(a,{Z:()=>i});var s=t(997);t(6689);var r=t(9832);let i=({size:e="md",variant:a="spinner",color:t="primary",className:i,text:l})=>{let n=()=>{switch(e){case"sm":return"w-4 h-4";case"md":default:return"w-6 h-6";case"lg":return"w-8 h-8";case"xl":return"w-12 h-12"}},c=()=>{switch(t){case"primary":default:return"text-primary-600";case"secondary":return"text-secondary-600";case"white":return"text-white";case"gray":return"text-gray-600"}},o=()=>(0,s.jsxs)("svg",{className:(0,r.cn)("animate-spin",n(),c(),i),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d=()=>s.jsx("div",{className:(0,r.cn)("flex space-x-1",i),children:[0,1,2].map(e=>s.jsx("div",{className:(0,r.cn)("rounded-full animate-pulse",n().replace("w-","w-").replace("h-","h-").split(" ").map(e=>e.startsWith("w-")?e.replace(/\d+/,e=>String(Math.max(1,parseInt(e)/2))):e.startsWith("h-")?e.replace(/\d+/,e=>String(Math.max(1,parseInt(e)/2))):e).join(" "),c().replace("text-","bg-")),style:{animationDelay:`${.2*e}s`,animationDuration:"1s"}},e))}),m=()=>s.jsx("div",{className:(0,r.cn)("rounded-full animate-pulse",n(),c().replace("text-","bg-"),i)}),x=()=>s.jsx("div",{className:(0,r.cn)("flex items-end space-x-1",i),children:[0,1,2,3].map(e=>s.jsx("div",{className:(0,r.cn)("animate-pulse","w-1",n().split(" ")[1],c().replace("text-","bg-")),style:{animationDelay:`${.15*e}s`,animationDuration:"0.8s",height:`${20+e%2*10}px`}},e))});return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(()=>{switch(a){case"spinner":default:return o();case"dots":return d();case"pulse":return m();case"bars":return x()}})(),l&&s.jsx("p",{className:(0,r.cn)("text-sm",c()),children:l})]})}},2674:(e,a,t)=>{t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{default:()=>P});var r=t(997),i=t(6689),l=t(968),n=t.n(l),c=t(1163),o=t(8484),d=t(9948),m=t(9314),x=t(1595),u=t(6250),h=t(9220),g=t(5585),p=t(9691),j=t(2290),y=t(2046),b=t(3749),w=t(4535),f=t(3054),v=t(1419),N=t(8379),S=t(1140),_=e([u]);u=(_.then?(await _)():_)[0];let Z=()=>{let{user:e}=(0,m.a)(),a=(0,c.useRouter)(),{addToast:t}=(0,d.p)(),[s,l]=(0,i.useState)(null),[x,_]=(0,i.useState)(!0);(0,i.useEffect)(()=>{e&&Z()},[e]);let Z=async()=>{try{_(!0);let e=await o.dashboardApi.getStats();if(e.success)l(e.data);else throw Error(e.message)}catch(e){t({type:"error",title:"Kesalahan",message:e.message||"Gagal memuat statistik dashboard"})}finally{_(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[r.jsx("title",{children:"Dashboard - AFMS"}),r.jsx("meta",{name:"description",content:"Dashboard AFMS"})]}),r.jsx(u.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Selamat datang, ",e?.nama_pegawai,"!"]}),(0,r.jsxs)("p",{className:"text-gray-600 mt-1",children:[e?.role==="admin"?"Administrator":e?.jabatan?.nama_jabatan," - ",e?.cabang?.nama_cabang]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(h.Z,{title:"Total Karyawan",value:s?.total_karyawan||0,icon:r.jsx(j.Z,{className:"h-6 w-6"}),color:"primary",loading:x}),r.jsx(h.Z,{title:"Total Cabang",value:s?.total_cabang||0,icon:r.jsx(y.Z,{className:"h-6 w-6"}),color:"secondary",loading:x}),r.jsx(h.Z,{title:"Hadir Hari Ini",value:s?.total_hadir_hari_ini||0,icon:r.jsx(b.Z,{className:"h-6 w-6"}),color:"success",loading:x}),r.jsx(h.Z,{title:"Terlambat Hari Ini",value:s?.total_terlambat_hari_ini||0,icon:r.jsx(w.Z,{className:"h-6 w-6"}),color:"warning",loading:x})]}),e?.role==="admin"&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(h.Z,{title:"Alpha Hari Ini",value:s?.total_alpha_hari_ini||0,icon:r.jsx(f.Z,{className:"h-6 w-6"}),color:"danger",loading:x}),r.jsx(h.Z,{title:"Persentase Kehadiran",value:`${s?.persentase_kehadiran||0}%`,icon:r.jsx(v.Z,{className:"h-6 w-6"}),color:"info",loading:x}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aksi Cepat"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("button",{onClick:()=>a.push("/admin/monitoring"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[r.jsx(N.Z,{className:"h-4 w-4 text-gray-600"}),"Monitoring Fingerprint"]}),(0,r.jsxs)("button",{onClick:()=>a.push("/admin/karyawan"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[r.jsx(j.Z,{className:"h-4 w-4 text-gray-600"}),"Kelola Karyawan"]}),(0,r.jsxs)("button",{onClick:()=>a.push("/admin/absensi"),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2",children:[r.jsx(S.Z,{className:"h-4 w-4 text-gray-600"}),"Laporan Absensi"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(g.Z,{}),r.jsx(p.Z,{})]})]})})]})},P=()=>r.jsx(x.Z,{children:r.jsx(Z,{})});s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9752:e=>{e.exports=import("@tanstack/react-query")},6926:e=>{e.exports=import("class-variance-authority")}};var a=require("../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[6859,8342,7890,1557,8489],()=>t(3393));module.exports=s})();