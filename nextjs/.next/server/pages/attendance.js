"use strict";(()=>{var e={};e.id=2166,e.ids=[2166],e.modules={5208:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{config:()=>g,default:()=>m,getServerSideProps:()=>h,getStaticPaths:()=>u,getStaticProps:()=>x,reportWebVitals:()=>p,routeModule:()=>N,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var s=t(7093),n=t(5244),l=t(1323),i=t(7645),d=t(6814),c=t(8990),o=e([d,c]);[d,c]=o.then?(await o)():o;let m=(0,l.l)(c,"default"),x=(0,l.l)(c,"getStaticProps"),u=(0,l.l)(c,"getStaticPaths"),h=(0,l.l)(c,"getServerSideProps"),g=(0,l.l)(c,"config"),p=(0,l.l)(c,"reportWebVitals"),b=(0,l.l)(c,"unstable_getStaticProps"),f=(0,l.l)(c,"unstable_getStaticPaths"),j=(0,l.l)(c,"unstable_getStaticParams"),v=(0,l.l)(c,"unstable_getServerProps"),y=(0,l.l)(c,"unstable_getServerSideProps"),N=new s.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/attendance",pathname:"/attendance",bundlePath:"",filename:""},components:{App:d.default,Document:i.default},userland:c});r()}catch(e){r(e)}})},1504:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{z:()=>o});var s=t(997),n=t(6689),l=t(6926),i=t(9832),d=e([l]);l=(d.then?(await d)():d)[0];let c=(0,l.cva)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary-600 text-white hover:bg-primary-700",destructive:"bg-danger-600 text-white hover:bg-danger-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-700",secondary:"bg-secondary-600 text-white hover:bg-secondary-700",ghost:"hover:bg-gray-100 text-gray-700",link:"underline-offset-4 hover:underline text-primary-600",success:"bg-success-600 text-white hover:bg-success-700",warning:"bg-warning-600 text-white hover:bg-warning-700"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=(0,n.forwardRef)(({className:e,variant:a,size:t,loading:r,leftIcon:n,rightIcon:l,children:d,disabled:o,...m},x)=>(0,s.jsxs)("button",{className:(0,i.cn)(c({variant:a,size:t,className:e})),ref:x,disabled:o||r,...m,children:[r&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!r&&n&&s.jsx("span",{className:"mr-2",children:n}),d,!r&&l&&s.jsx("span",{className:"ml-2",children:l})]}));o.displayName="Button",r()}catch(e){r(e)}})},8990:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>y});var s=t(997),n=t(6689),l=t(968),i=t.n(l),d=t(1163),c=t(9232),o=t(8617),m=t(2349),x=t(6856),u=t(4163),h=t(6250),g=t(2843);!function(){var e=Error("Cannot find module '../hooks/useDataTable'");throw e.code="MODULE_NOT_FOUND",e}();var p=t(1504),b=t(9553),f=t(6604),j=t(9832),v=e([h,p]);[h,p]=v.then?(await v)():v;let y=()=>{(0,d.useRouter)();let{state:e,actions:a}=Object(function(){var e=Error("Cannot find module '../hooks/useDataTable'");throw e.code="MODULE_NOT_FOUND",e}())({initialPageSize:15,searchDebounceMs:500}),[t,r]=(0,n.useState)({dateFrom:"",dateTo:"",status:""}),[l,v]=(0,n.useState)(!1),y=async()=>{a.setLoading(!0),a.setError(null);try{let r=new URLSearchParams({page:e.pagination.current.toString(),pageSize:e.pagination.pageSize.toString(),search:e.search,...e.sort&&{sortField:e.sort.field,sortOrder:e.sort.order},...t.dateFrom&&{dateFrom:t.dateFrom},...t.dateTo&&{dateTo:t.dateTo},...t.status&&{status:t.status}}),s=await fetch(`/api/attendance?${r}`),n=await s.json();n.success?(a.setData(n.data),a.setPagination(n.pagination)):a.setError(n.message||"Gagal memuat data kehadiran")}catch(e){a.setError("Gagal memuat data kehadiran")}finally{a.setLoading(!1)}};(0,n.useEffect)(()=>{y()},[e.pagination.current,e.pagination.pageSize,e.search,e.sort,t]);let N=(t,s)=>{r(e=>({...e,[t]:s})),a.handlePaginationChange(1,e.pagination.pageSize)},w=e=>{let a={hadir:{bg:"bg-green-100",text:"text-green-800",label:"Hadir"},terlambat:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Terlambat"},tidak_hadir:{bg:"bg-red-100",text:"text-red-800",label:"Tidak Hadir"},izin:{bg:"bg-blue-100",text:"text-blue-800",label:"Izin"},sakit:{bg:"bg-purple-100",text:"text-purple-800",label:"Sakit"}}[e]||{bg:"bg-gray-100",text:"text-gray-800",label:e};return s.jsx("span",{className:(0,j.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.bg,a.text),children:a.label})},k=e=>e?e.substring(0,5):"-",S=(e,a)=>{if(!e||!a)return"-";let t=new Date(`2000-01-01T${e}`),r=new Date(`2000-01-01T${a}`).getTime()-t.getTime();return`${Math.floor(r/36e5)}h ${Math.floor(r%36e5/6e4)}m`};return(0,s.jsxs)(h.Z,{children:[s.jsx(i(),{children:s.jsx("title",{children:"Catatan Kehadiran - AFMS"})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catatan Kehadiran"}),s.jsx("p",{className:"text-gray-600",children:"Pantau kehadiran karyawan dan jam kerja"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)(p.z,{variant:"outline",onClick:()=>v(!l),className:"flex items-center space-x-2",children:[s.jsx(m.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Saring"})]}),(0,s.jsxs)(p.z,{variant:"outline",onClick:()=>{},className:"flex items-center space-x-2",children:[s.jsx(x.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Ekspor"})]})]})]}),l&&s.jsx(b.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dari Tanggal"}),s.jsx("input",{type:"date",value:t.dateFrom,onChange:e=>N("dateFrom",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sampai Tanggal"}),s.jsx("input",{type:"date",value:t.dateTo,onChange:e=>N("dateTo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsx(f.P,{options:[{label:"Semua Status",value:""},{label:"Hadir",value:"hadir"},{label:"Terlambat",value:"terlambat"},{label:"Tidak Hadir",value:"tidak_hadir"},{label:"Izin",value:"izin"},{label:"Sakit",value:"sakit"}],value:t.status,onChange:e=>N("status",e),className:"w-full"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(p.z,{variant:"outline",onClick:()=>{r({dateFrom:"",dateTo:"",status:""})},className:"w-full",children:"Hapus Filter"})})]})}),e.error&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsx("div",{className:"text-red-800",children:e.error})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(b.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(u.Z,{className:"h-8 w-8 text-green-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Hadir Hari Ini"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"-"})]})]})}),s.jsx(b.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(o.Z,{className:"h-8 w-8 text-yellow-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Terlambat Hari Ini"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"-"})]})]})}),s.jsx(b.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(u.Z,{className:"h-8 w-8 text-red-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tidak Hadir Hari Ini"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"-"})]})]})}),s.jsx(b.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(c.Z,{className:"h-8 w-8 text-blue-600"})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Catatan"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.pagination.total})]})]})})]}),s.jsx(g.Z,{columns:[{key:"user",title:"Karyawan",sortable:!0,render:(e,a)=>(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-500 flex items-center justify-center text-white font-medium",children:a.user.name.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.user.name}),s.jsx("div",{className:"text-sm text-gray-500",children:a.user.username})]})]})},{key:"tanggal",title:"Tanggal",dataIndex:"tanggal",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(c.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]})},{key:"jam_masuk",title:"Jam Masuk",dataIndex:"jam_masuk",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(o.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:(0,j.cn)("font-mono text-sm",e?"text-gray-900":"text-gray-400"),children:k(e)})]})},{key:"jam_keluar",title:"Jam Keluar",dataIndex:"jam_keluar",sortable:!0,render:e=>(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(o.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("span",{className:(0,j.cn)("font-mono text-sm",e?"text-gray-900":"text-gray-400"),children:k(e)})]})},{key:"working_hours",title:"Jam Kerja",render:(e,a)=>s.jsx("span",{className:"font-mono text-sm text-gray-900",children:S(a.jam_masuk,a.jam_keluar)})},{key:"status",title:"Status",dataIndex:"status",sortable:!0,render:e=>w(e)},{key:"keterangan",title:"Keterangan",dataIndex:"keterangan",render:e=>s.jsx("span",{className:"text-sm text-gray-600",children:e||"-"})}],data:e.data,loading:e.loading,pagination:e.pagination,onPaginationChange:a.handlePaginationChange,onSortChange:a.handleSortChange,onSearch:a.handleSearchChange,searchable:!0,searchPlaceholder:"Cari berdasarkan nama karyawan atau username...",emptyText:"Tidak ada catatan kehadiran ditemukan",pageSizeOptions:[10,15,25,50]})]})]})};r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},9752:e=>{e.exports=import("@tanstack/react-query")},6926:e=>{e.exports=import("class-variance-authority")},6856:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))})},9232:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))})},2349:(e,a,t)=>{t.d(a,{Z:()=>s});var r=t(6689);let s=r.forwardRef(function({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))})}};var a=require("../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[6859,8342,7890,1557,2843],()=>t(5208));module.exports=r})();